<script>
  async function generateImage() {
    const prompt = document.getElementById('prompt').value;

    const response = await fetch("https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-2", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ inputs: prompt })
    });

    if (!response.ok) {
      document.getElementById("result").innerHTML = `<p>Model is loading or busy. Try again in a moment.</p>`;
      return;
    }

    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    document.getElementById("result").innerHTML = `<img src="${url}" alt="Generated Image">`;
  }
</script>
